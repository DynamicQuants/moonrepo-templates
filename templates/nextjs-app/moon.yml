type: application
language: typescript

fileGroups:
  app:
    - 'src/**/*'
    - 'next-env.d.ts'
    - 'next.config.*'
  tests:
    - 'tests/**/*'

tasks:
  # Building the application.
  build:
    command: 'next build'
    type: build
    inputs:
      - '@group(app)'

  # Running the application in production mode.
  start:
    command: 'next start'
    type: run
    local: true
    deps:
      - build

  # Running the application in development mode.
  dev:
    command: 'next dev --port 3000'
    type: run
    local: true

  # Linting using Next.js and ESLint.
  lint:
    command: 'next lint'

  # Testing with Jest.
  test:
    command: 'jest --verbose'
    type: test
    inputs:
      - '@group(tests)'
  test-watch:
    command: 'jest --watch'
    type: test
    inputs:
      - '@group(tests)'
  test-e2e:
    command: 'playwright test'
    type: test
    inputs:
      - '@group(tests)'

  # Checking formatting using Prettier.
  format-check:
    command: 'prettier --check \"src/**/*.{ts,tsx,md}\" \"*.{ts,tsx,mjs}\"'
  format:
    command: 'prettier --write \"src/**/*.{ts,tsx,md}\" \"*.{ts,tsx,mjs}\"'
